<ng-progress></ng-progress>
<div class="gray-bg">
    <div class="container">
  
        <ng-template #customLoadingTemplate>
          <div class="row">
            <div class="col">
              <div class="col-12 text-center" ><img class="loader-gif" src="../../assets/loadingfish.gif" alt=""></div>
            </div>
          </div>
        </ng-template>
        <ngx-loading [show]="loading" [config]="{ fullScreenBackdrop: true}" [template]="customLoadingTemplate"></ngx-loading>
<div style="height: 100px;"></div>
<div class="row">

  <div class="col-lg-12">
    <form *ngIf="info.role == 2 || info.role == 0" (submit)="updateBuyer()" [formGroup]="buyerForm">
      <div class="row">
          <div class="col-lg-12 text-center">
              <h1 class="gray-title" ><span>Account Info</span></h1>
            </div>
        <div class="col-lg-6">
            
          <div class="form-group input-group">
              <span class="has-float-label">  
                  <input id="first" placeholder="{{'Account.first-name' | translate}}" type="text" class="form-control"  formControlName="firstName" [ngClass]="{'is-invalid':buyerForm.get('firstName').invalid && buyerForm.get('firstName').touched}">
                 <label for="first">{{'Account.first-name' | translate}}<span class="field-status red">*</span> </label>
            <div class="invalid-feedback" *ngIf="buyerForm.get('firstName').hasError('required')">{{'Register.first-name' | translate}} {{'Register.required' | translate}}.</div>              
              </span>
          </div>
        </div>

        <div class="col-lg-6">
          <div class="form-group input-group">
              <span class="has-float-label"> 
                  <input id="last" placeholder="{{'Account.last-name' | translate}}" type="text" class="form-control"  formControlName="lastName" [ngClass]="{'is-invalid':buyerForm.get('lastName').invalid && buyerForm.get('lastName').touched}">

            <label for="last">{{'Account.last-name' | translate}}<span class="field-status red">*</span> </label>
            <div class="invalid-feedback" *ngIf="buyerForm.get('lastName').hasError('required')">{{'Register.last-name' | translate}} {{'Register.required' | translate}}.</div>              
          </span>
          </div>
        </div>


        <div class="col-lg-6">
          <div class="form-group input-group">
              <span class="has-float-label"> 
               <input id="email" placeholder="{{'Account.email' | translate}}" type="text" class="form-control"  formControlName="email" [ngClass]="{'is-invalid':buyerForm.get('email').invalid && buyerForm.get('email').touched}">

            <label for="email">{{'Account.email' | translate}}<span class="field-status red">*</span> </label>
            <div class="invalid-feedback" *ngIf="buyerForm.get('email').hasError('required')">{{'Register.email' | translate}} {{'Register.required' | translate}}.</div>  
            <div class="invalid-feedback" *ngIf="buyerForm.get('email').hasError('email') && !buyerForm.get('email').hasError('required')">{{'Account.email' | translate}} {{'Register.invalid' | translate}}</div>
          </span>
          </div>
        </div>

        <div class="col-lg-6">
          <div class="form-group input-group">
              <span class="has-float-label"> 
            <input id="tel" placeholder="{{'Account.tel' | translate}}" type="tel" class="form-control" formControlName="telephone" [ngClass]="{'is-invalid':buyerForm.get('telephone').invalid && buyerForm.get('telephone').touched}">
            <label for="tel">{{'Account.tel' | translate}}<span class="field-status red">*</span></label>

            <div class="invalid-feedback" *ngIf="buyerForm.get('telephone').hasError('required')">{{'Account.tel' | translate}} {{'Register.required' | translate}}.</div>
            <div class="invalid-feedback" *ngIf="buyerForm.controls.telephone.errors">Only numbers allowed</div>
          </span>
          </div>
        </div>

        <div class="col-lg-6">
          <div class="form-group input-group">
              <span class="has-float-label"> 
            <input id="company" placeholder="{{'Account.company' | translate}}" type="text" class="form-control" placeholder="{{'Account.company' | translate}}" formControlName="companyName" [ngClass]="{'is-invalid':buyerForm.get('companyName').invalid && buyerForm.get('companyName').touched}">
            <label for="company">{{'Account.company' | translate}}<span class="field-status red">*</span></label>

            <div class="invalid-feedback" *ngIf="buyerForm.get('companyName').hasError('required')">{{'Account.company' | translate}} {{'Register.required' | translate}}.</div>
            </span>
          </div>
        </div>

        <div class="col-lg-6">
          <div class="form-group input-group">
              <span class="has-float-label"> 
            <input id="type" placeholder="Type of Business" type="text" class="form-control" placeholder="Type of Business" formControlName="typeBusiness" [ngClass]="{'is-invalid':buyerForm.get('typeBusiness').invalid && buyerForm.get('typeBusiness').touched}">
            <label for="type">Type of Business<span class="field-status red">*</span></label>

            <div class="invalid-feedback" *ngIf="buyerForm.get('typeBusiness').hasError('required')">{{'Account.company' | translate}} {{'Register.required' | translate}}.</div>
              </span>
          </div>
        </div>


        <div class="col-lg-6">
          <div class="form-group input-group" >
              <span class="has-float-label"> 
            <select disabled id="country" class="form-control" formControlName="country" [ngClass]="{'is-invalid':buyerForm.get('country').invalid && buyerForm.get('country').touched}">
             <option value="{{country.code}}" *ngFor="let country of countries">{{country.name}}</option>
            </select>
            <label for="country">{{'Account.country' | translate}}<span class="field-status red">*</span></label>

            <div class="invalid-feedback" *ngIf="buyerForm.get('country').hasError('required')">{{'Account.country' | translate}} {{'Register.required' | translate}}.</div>
            </span>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="form-group input-group">
              <span class="has-float-label"> 
            <input id="address" placeholder="{{'Account.Address' | translate}}" type="text" class="form-control" placeholder="{{'Account.Address' | translate}}" formControlName="address" [ngClass]="{'is-invalid':buyerForm.get('address').invalid && buyerForm.get('address').touched}">
            <label for="address">{{'Account.Address' | translate}}<span class="field-status red">*</span></label>

            <div class="invalid-feedback" *ngIf="buyerForm.get('address').hasError('required')">{{'Account.Address' | translate}} {{'Register.required' | translate}}.</div>
              </span>
          </div>
        </div>

        <div class="col-lg-12">
          <div class="form-group input-group" style="max-width:975px;">
            <span class="has-float-label select-float-label">    
              <select id="city" class="form-control js-example-basic-single" style="width: 100%" formControlName="city" [ngClass]="{'is-invalid':buyerForm.get('city').invalid && buyerForm.get('city').touched}">
                <option value="">Select an Emirate...</option>
                <option value="Dubai">Dubai</option>
                <option value="Abu Dhabi">Abu Dhabi</option>
                <option value="Ajman">Ajman</option>
                <option value="Fujairah">Fujairah</option>
                <option value="Ras Al Khaimah">Ras Al Khaimah</option>
                <option value="Sharjah">Sharjah</option>
                <option value="Umm Al Quwain">Umm Al Quwain</option>
              </select> 
              <label for="city">Emirate</label> 
              <div class="invalid-feedback" *ngIf="buyerForm.get('city').hasError('required')"> Emirate {{'Register.required' | translate}}.</div>

        </span>  
             
          </div>
        </div>


      </div>
      <div class="row">
          <div class="col-lg-6">
              <button type="button" class="btn btn-save" data-toggle="modal" data-target="#changePassword">{{'Account.title-change-password' | translate}}</button>
            </div>
        <div class="col-lg-6">
          <button type="submit" class="btn btn-save">{{'Account.button-update' | translate}}</button>
        </div>
        
      </div>
    </form>
  
    <form *ngIf="info.role == 1" (submit)="updateSeller()" [formGroup]="sellerForm">
      <div class="row">
        <div class="col-lg-12 text-center">
          <h1 class="gray-title" ><span>Account Info</span></h1>
        </div>
        <div class="col-lg-6">
    

          <div class="form-group input-group">
              <span class="has-float-label">  
                  <input id="name" type="text" placeholder="{{'Account.first-name' | translate}}" class="form-control"  formControlName="firstName" [ngClass]="{'is-invalid':sellerForm.get('firstName').invalid && sellerForm.get('firstName').touched}">
                  <label for="name">{{'Account.first-name' | translate}}<span class="field-status red">*</span> </label>
                  <div class="invalid-feedback" *ngIf="sellerForm.get('firstName').hasError('required')">{{'Register.first-name' | translate}} {{'Register.required' | translate}}.</div>              
            </span>
          </div>
        </div>  
        <div class="col-lg-6">
          <div class="form-group input-group">
            <span class="has-float-label">
                <input id="last" type="text" class="form-control" placeholder="{{'Account.last-name' | translate}}"  formControlName="lastName" [ngClass]="{'is-invalid':sellerForm.get('lastName').invalid && sellerForm.get('lastName').touched}">
                <label for="last">{{'Account.last-name' | translate}}<span class="field-status red">*</span> </label>
                <div class="invalid-feedback" *ngIf="sellerForm.get('lastName').hasError('required')">{{'Register.last-name' | translate}} {{'Register.required' | translate}}.</div>      
            </span>
                   
          </div>
        </div>


        <div class="col-lg-6">
          <div class="form-group input-group">
              <span class="has-float-label">     
            <input id="email" type="text" class="form-control"  placeholder="{{'Account.email' | translate}}" formControlName="email" [ngClass]="{'is-invalid':sellerForm.get('email').invalid && sellerForm.get('email').touched}">
            <label for="email">{{'Account.email' | translate}}<span class="field-status red">*</span> </label>
            <div class="invalid-feedback" *ngIf="sellerForm.get('email').hasError('required')">{{'Register.email' | translate}} {{'Register.required' | translate}}.</div>  
            <div class="invalid-feedback" *ngIf="sellerForm.get('email').hasError('email') && !sellerForm.get('email').hasError('required')">{{'Account.email' | translate}} {{'Register.invalid' | translate}}</div>
                </span>
          </div>
        </div>

        <div class="col-lg-6">
          <div class="form-group input-group">
              <span class="has-float-label">     

            <input id="tel" placeholder="{{'Account.tel' | translate}}" type="tel" class="form-control" formControlName="telephone" [ngClass]="{'is-invalid':sellerForm.get('telephone').invalid && sellerForm.get('telephone').touched}">
            <label for="tel">{{'Account.tel' | translate}}<span class="field-status red">*</span></label>
            <div class="invalid-feedback" *ngIf="sellerForm.get('telephone').hasError('required')">{{'Account.tel' | translate}} {{'Register.required' | translate}}.</div>
            <div class="invalid-feedback" *ngIf="sellerForm.controls.telephone.errors">Only numbers allowed</div>
          </span>
          </div>
        </div>
        <div class="col-lg-12 text-center">
            <h1 class="gray-title" style="margin-top: 60px;"><span>Company Info</span></h1>
          </div>

        <div class="col-md-6">
          <div class="form-group input-group">
            <span class="has-float-label">
                <input id="companyname" placeholder="{{'Register.company' | translate}}" disabled type="text" class="form-control" placeholder="{{'Register.company' | translate}}" formControlName="companyName" [ngClass]="{'is-invalid':sellerForm.get('companyName').invalid && sellerForm.get('companyName').touched}">
                <label for="companyname" class="disabled-label">{{'Register.company' | translate}} <span class="field-status red">*</span></label>

                <div class="invalid-feedback" *ngIf="sellerForm.get('companyName').hasError('required')"> {{'Register.company' | translate}} {{'Register.required' | translate}}.</div>
            </span>
            
          </div>
        </div>
        <div class="col-md-6">  
          <div class="form-group input-group">
              <span class="has-float-label">
                  <input id="brandme" placeholder="Trade/Brand Name"  disabled type="text" class="form-control" placeholder="Trade/Brand Name" formControlName="trade"  [ngClass]="{'is-invalid':sellerForm.get('trade').invalid && sellerForm.get('trade').touched}">

            <label for="brandme" class="disabled-label">Trade/Brand Name <span class="field-status red">*</span></label>
            <div class="invalid-feedback" *ngIf="sellerForm.get('trade').hasError('required')">Trade/Brand Name is required.</div>
          </span>
          </div>
        </div>

        <div class="col-md-12">
          <div class="form-group input-group" style="max-width:975px;">
              <span class="has-float-label">
               <input type="text" id="desc" placeholder="Company Description" class="form-control" formControlName="storeDescription" [ngClass]="{'is-invalid':sellerForm.get('storeDescription').invalid && sellerForm.get('storeDescription').touched}">
              <label for="desc">Company Description 
                <!-- <span class="field-status red">*</span> -->
              </label>
              <!-- <div class="invalid-feedback" *ngIf="sellerForm.get('storeDescription').hasError('required')">Company Description is required.</div> -->
              </span>
            </div>
         

        </div>
        <div class="col-md-6">
          <div class="form-group input-group">
              <span class="has-float-label">
            <select id="type" disabled class="form-control"  formControlName="companyType" [ngClass]="{'is-invalid':sellerForm.get('companyType').invalid && sellerForm.get('companyType').touched}">
              <option value="Producer">Producer</option>
              <option value="Processor">Processor </option>
              <option value="Trader">Trader</option>
            </select>
            <label id="type" class="disabled-label">{{'Register.company-type' | translate}} <span class="field-status red">*</span></label>

            <div class="invalid-feedback" *ngIf="sellerForm.get('companyType').hasError('required')"> {{'Register.company-type' | translate}} {{'Register.required' | translate}}.</div>
         </span>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group input-group">
              <span class="has-float-label">
            <select id="country" disabled class="form-control"  formControlName="country" [ngClass]="{'is-invalid':sellerForm.get('country').invalid && sellerForm.get('country').touched}">
              <option value="">{{'Register.country' | translate}}</option>
               <option *ngFor="let country of countries" value="{{country.name}}">{{country.name}}</option>
            </select>
            <label for="country" class="disabled-label">{{'Register.country' | translate}} <span class="field-status red">*</span></label>

            <div class="invalid-feedback" *ngIf="sellerForm.get('country').hasError('required')"> {{'Register.country' | translate}} {{'Register.required' | translate}}.</div>
          </span>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group input-group">
              <span class="has-float-label">
             <input id="address" placeholder="{{'Register.Address' | translate}}" disabled type="text" class="form-control" placeholder="{{'Register.Address' | translate}}" formControlName="address"  [ngClass]="{'is-invalid':sellerForm.get('address').invalid && sellerForm.get('address').touched}">

            <label for="address" class="disabled-label">{{'Register.Address' | translate}} <span class="field-status red">*</span></label>
            <div class="invalid-feedback" *ngIf="sellerForm.get('address').hasError('required')"> {{'Register.Address' | translate}} {{'Register.required' | translate}}.</div>
          </span>
          </div>
        </div>
        <div class="col-md-6">  
          <div class="form-group input-group">
              <span class="has-float-label">
            <input id="city" placeholder="{{'Register.City' | translate}}" disabled type="text" class="form-control" placeholder="{{'Register.City' | translate}}" formControlName="city"  [ngClass]="{'is-invalid':sellerForm.get('city').invalid && sellerForm.get('city').touched}">
            <label for="city" class="disabled-label">{{'Register.City' | translate}} <span class="field-status red">*</span></label>

            <div class="invalid-feedback" *ngIf="sellerForm.get('city').hasError('required')"> {{'Register.City' | translate}} {{'Register.required' | translate}}.</div>
          </span>
          </div>
        </div>
        <div class="col-md-6">  
          <div class="form-group input-group">
              <span class="has-float-label">
                  <input  id="tlc" placeholder="Trade License Number (Registration)"  disabled type="text" class="form-control" placeholder="Trade License Number (Registration)" formControlName="licenseNumber"  [ngClass]="{'is-invalid':sellerForm.get('licenseNumber').invalid && sellerForm.get('licenseNumber').touched}">

            <label for="tlc" class="disabled-label">Trade License Number (Registration) <span class="field-status red">*</span></label>
            <div class="invalid-feedback" *ngIf="sellerForm.get('licenseNumber').hasError('required')">Trade License Number (Registration) is required.</div>
         </span>
          </div>
        </div>
        <div class="col-md-6">  
          <div class="form-group input-group">
              <span class="has-float-label">
                  <input id="iso" placeholder="Food Safety Certificate Number (ISO)" type="text" class="form-control" placeholder="Food Safety Certificate Number (ISO)" formControlName="iso"  [ngClass]="{'is-invalid':sellerForm.get('iso').invalid && sellerForm.get('iso').touched}">

            <label for="iso">Food Safety Certificate Number (ISO) <span class="field-status red">*</span></label>
            <div class="invalid-feedback" *ngIf="sellerForm.get('iso').hasError('required')">Food Safety Certificate Number (ISO) is required.</div>
         </span>
          </div>
        </div>
        <div class="col-md-6">  
          <div class="form-group input-group">
              <span class="has-float-label">
            <input  id="iban" placeholder="Corporate Bank Account Number IBAN" type="text" class="form-control" placeholder="Corporate Bank Account Number IBAN" formControlName="iban"  [ngClass]="{'is-invalid':sellerForm.get('iban').invalid && sellerForm.get('iban').touched}">
            <label for="iban">Corporate Bank Account Number IBAN <span class="field-status red">*</span></label>
            <div class="invalid-feedback" *ngIf="sellerForm.get('iban').hasError('required')">Corporate Bank Account Number IBAN is required.</div>
          </span>
          </div>
        </div>
        <div class="col-md-6">  
          <div class="form-group input-group">
              <span class="has-float-label">
            <input id="pis" placeholder="Products Interested in Selling" type="text" class="form-control" placeholder="Products Interested in Selling" formControlName="productsIntered"  [ngClass]="{'is-invalid':sellerForm.get('productsIntered').invalid && sellerForm.get('productsIntered').touched}">
            <label for="pis">Products Interested in Selling <span class="field-status red">*</span></label>
            <div class="invalid-feedback" *ngIf="sellerForm.get('productsIntered').hasError('required')">Products Interested in Selling is required.</div>
            </span>
          </div>
        </div>
        <div class="col-md-6">  
          <div class="form-group input-group">
              <span class="has-float-label">
            <input id="cn" placeholder="Contact Number" type="number" class="form-control" placeholder="Contact Number" formControlName="contactNumber"  [ngClass]="{'is-invalid':sellerForm.get('contactNumber').invalid && sellerForm.get('contactNumber').touched}">
            <label for="cn">Contact Number <span class="field-status red">*</span></label>
            <div class="invalid-feedback" *ngIf="sellerForm.get('contactNumber').hasError('required')">Contact Number is required.</div>
         </span>
          </div>
        </div>
        <div class="col-md-6">  
          <div class="form-group input-group">
              <span class="has-float-label">

            <select id="currency" disabled class="form-control" formControlName="currencyTrade"  [ngClass]="{'is-invalid':sellerForm.get('currencyTrade').invalid && sellerForm.get('currencyTrade').touched}">
              <option value="AED">AED</option>
              <option value="USD">USD</option>
              <option value="EUR">EUR</option>
              <option value="GBP">GBP</option>
            </select>
            <label for="currency" class="disabled-label">Currency of Trade <span class="field-status red">*</span></label>

            <div class="invalid-feedback" *ngIf="sellerForm.get('currencyTrade').hasError('required')">Currency of Trade is required.</div>
          </span>
          </div>
        </div>


      </div>
      <div class="row">
          <div class="col-lg-6">
              <div class="form-group file-input">
                  <label for="file"><img src="../../assets/svg/attachment.svg" alt=""> Upload Logo...</label>
                  <input  type="file" class="form-control" id="file" (change)="handleFileInput($event.target.files)" accept="image/*">
                  <img id="logo">
                </div>
            <div class="form-group img-cont" *ngIf="logo != ''">
              <img [src]="base + logo" alt="" style="width: 150px;">
            </div>
           
          </div>
          <div class="col-lg-6">
              <div class="form-group file-input">
                  <label for="fileHero"><img src="../../assets/svg/attachment.svg" alt=""> Upload Hero Image...</label>
                  <input type="file" class="form-control" type="file" id="fileHero" accept="image/*"
                    (change)="handleFileHero($event.target.files)">
                    <img id="hero" alt="">
                </div>
            <div class="form-group img-cont" *ngIf="hero != ''">
              <img [src]="base + hero" alt="" style="width: 350px;">
            </div>
            
          </div>
        </div>
      <div class="row">
        
        <div class="col-lg-6">
          <button type="button" class="btn btn-save" data-toggle="modal" data-target="#changePassword">{{'Account.title-change-password' | translate}}</button>
        </div>
        <div class="col-lg-6">
            <button type="submit" class="btn btn-save">Save changes</button>
          </div>
      </div>
    </form>
  </div>
</div>
</div>

<div class="modal fade" id="changePassword" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <img src="../../assets/svg/close.svg" alt="">
              </button>
          <h5 class="modal-title">CHANGE PASSWORD</h5>
          <button type="submit" class="close" (click)="handleSubmit()">
              <img src="../../assets/svg/check.svg" alt="">
            </button>
        </div>
        <div class="modal-body">
         <form [formGroup]="passwordForm" (submit)="updatePassword()" >
            <div class="form-group input-group">
                <span class="has-float-label">
                    <input type="password" placeholder="{{'Account.current' | translate}}" class="form-control" id="current" formControlName="currentPassword" [ngClass]="{'is-invalid':passwordForm.get('currentPassword').invalid && passwordForm.get('currentPassword').touched}">
  
              <label for="current">{{'Account.current' | translate}}</label>
              <div class="invalid-feedback" *ngIf="passwordForm.get('currentPassword').hasError('required')"> {{'Register.rePassword' | translate}} {{'Register.required' | translate}}.</div>

              </span>
            </div>
            <div class="form-group input-group">
                <span class="has-float-label">
             <input type="password" placeholder="{{'Account.new' | translate}}" class="form-control" id="pass" formControlName="password" [ngClass]="{'is-invalid':passwordForm.get('password').invalid && passwordForm.get('password').touched}">
              <label for="pass">{{'Account.new' | translate}}</label>
              <div class="invalid-feedback" *ngIf="passwordForm.get('password').hasError('password') || passwordForm.get('password').hasError('required')">{{'Register.password' | translate}} {{'Register.required' | translate}}.</div>	
              <div class="invalid-feedback" *ngIf="passwordForm.get('password').errors?.pattern">{{'Register.passwordPatternError' | translate}}</div>
            </span>
            </div>
            <div class="form-group input-group">
                <span class="has-float-label">
              <input type="password" placeholder="{{'Account.repeat' | translate}}" class="form-control" id="rep" formControlName="rePassword" [ngClass]="{'is-invalid':passwordForm.get('rePassword').invalid && passwordForm.get('rePassword').touched}">
              <label for="rep">{{'Account.repeat' | translate}}</label>
              <div class="invalid-feedback" *ngIf="passwordForm.get('rePassword').hasError('required')"> {{'Register.rePassword' | translate}} {{'Register.required' | translate}}.</div>
              <div class="invalid-feedback" *ngIf="passwordForm.controls.rePassword.errors?.MatchPassword"> Passwords not match</div>
           </span>
            </div>
            <button id="submit-btn" style="visibility:hidden;"  type="submit">submit</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>


