<div class="container-fluid orders-tabs">
		<div class="row" *ngIf="showLoading; else productshow">
				<div class="col-12 text-center">
					<img src="../../assets/loader.gif" alt="" />
				</div>
			</div>
			<ng-template #productshow>

	<div class="row" >
		<div class="col-lg-12">
			<ul class="nav nav-tabs" id="myTab" role="tablist">
				<li class="nav-item">
					<a class="nav-link active" id="pending-tab" data-toggle="tab" href="#pending" role="tab" aria-controls="pending" aria-selected="true">Pending</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" id="purchased-tab" data-toggle="tab" href="#purchased" role="tab" aria-controls="purchased" aria-selected="false">Shipped</a>
				</li>
				<li class="nav-item">
						<a class="nav-link" id="delivered-tab" data-toggle="tab" href="#delivered" role="tab" aria-controls="delivered" aria-selected="false">Delivered</a>
					</li>
					<li class="nav-item">
							<a class="nav-link" id="cancelled-tab" data-toggle="tab" href="#cancelled" role="tab" aria-controls="cancelled" aria-selected="false">Cancelled</a>
						</li>
			</ul>
			<div class="tab-content" id="myTabContent">
				<div class="tab-pane fade show active" id="pending" role="tabpanel" aria-labelledby="pending-tab" >
					<table class="table" *ngIf="showProduct; else noProduct">
						<thead>
							<tr>
								<th scope="col">Order</th>
								<th scope="col">Date</th>
								<th scope="col">Address</th>
								<th scope="col">QTY</th>
								<th scope="col">SKU</th>
								<th scope="col">Product</th>
								<th scope="col"></th>
							</tr>
						</thead>
						<tbody>
							<tr *ngFor="let item of firstNoShipped; let i=index">
								<td>{{item.orderNumber}}</td>
								<td>{{item.updatedAt | date: 'd/M/y'}}</td>
								<td>{{item?.buyer?.dataExtra?.Address}}</td>
								<td *ngIf="item.items.length == 1">{{item?.items[0]?.quantity?.value}} kg </td>
								<td *ngIf="item.items.length == 1">{{item?.items[0]?.fish?.seafood_sku}}</td>
								<td *ngIf="item.items.length == 1">{{item?.items[0]?.fish?.name}} </td>
								<td *ngIf="item.items.length == 1">
										<button [owlDateTimeTrigger]="dt1"  *ngIf="item.items[0].updateInfo == null"><img src="../../assets/svg/calendar-blank.svg" alt=""></button>
										<button *ngIf="item.items[0].updateInfo != null" (click)="showModal(item.items[0].id,'cancel', i, 'pending')"><img src="../../assets/svg/close.svg" alt=""></button>
										<button *ngIf="item.items[0].updateInfo != null" (click)="openShippingModal(item.items[0].id, i)"><img src="../../assets/svg/attachment.svg" alt=""></button>
										<input class="input-hidden" (change)="selectDate(item.items[0].id)"  [min]="min" [max]="max"  [owlDateTime]="dt1" id="epa{{item.items[0].id}}">
										<owl-date-time [pickerType]="'calendar'" #dt1 (afterPickerClosed)="selectDate(item.items[0].id, i)"></owl-date-time>
									</td>
								<td *ngIf="item.items.length > 1">N/A</td>
								<td *ngIf="item.items.length > 1">N/A</td>
								<td *ngIf="item.items.length > 1">{{item.items.length}} items </td>
								<td *ngIf="item.items.length > 1"><a routerLink="/order-purchase/{{item.id}}"> <img src="../../assets/svg/plus.svg" alt="Open"></a></td> 
								
							</tr>
						
						</tbody>
					</table>
					<ng-template #noProduct>
							<div class="row">
								<div class="col-12">
									<h4 class="black-title">{{'Recent.no-product' | translate}}</h4>
								</div>
							</div>
						</ng-template>
				</div>
				<div class="tab-pane fade" id="purchased" role="tabpanel" aria-labelledby="purchased-tab">
						<table class="table" *ngIf="showShipped; else noShipped" id="shipped-table">
								<thead>
									<tr>
										<th scope="col">Order</th>
										<th scope="col">Date</th>
										<th scope="col">Address</th>
										<th scope="col">QTY</th>
										<th scope="col">SKU</th>
										<th scope="col">Product</th>
										<th></th>
									</tr>
								</thead>
								<tbody>
									<tr *ngFor="let shipped of firstShipped; let i=index">
										<td>{{shipped.orderNumber}}</td>
										<td>{{shipped.updatedAt | date: 'd/M/y'}}</td>
										<td>{{shipped?.buyer?.dataExtra?.Address}}</td>
										<td *ngIf="shipped.items.length == 1">{{shipped?.items[0]?.quantity?.value}} kg </td>
										<td *ngIf="shipped.items.length == 1">{{shipped?.items[0]?.fish?.seafood_sku}}</td>
										<td *ngIf="shipped.items.length == 1">{{shipped?.items[0]?.fish?.name}} </td>
										<td *ngIf="shipped.items.length == 1">
												<button [owlDateTimeTrigger]="dt1"  *ngIf="shipped.items[0].updateInfo == null"><img src="../../assets/svg/calendar-blank.svg" alt=""></button>
												<button *ngIf="shipped.items[0].updateInfo != null" (click)="showModal(shipped.items[0].id,'cancel', i, 'shipped')"><img src="../../assets/svg/close.svg" alt=""></button>
												<button *ngIf="shipped.items[0].updateInfo != null" (click)="openShippingModal(shipped.items[0].id, i)"><img src="../../assets/svg/attachment.svg" alt=""></button>
												<input (change)="selectDate(shipped.items[0].id)" type="hidden" [min]="min" [max]="max"  [owlDateTime]="dt1" id="epa{{shipped.items[0].id}}">
												<owl-date-time [pickerType]="'calendar'" #dt1 (afterPickerClosed)="selectDate(shipped.items[0].id, i)"></owl-date-time>
											</td>
										<td *ngIf="shipped.items.length > 1">N/A</td>
										<td *ngIf="shipped.items.length > 1">N/A</td>
										<td *ngIf="shipped.items.length > 1">{{shipped.items.length}} items</td>
										<td *ngIf="shipped.items.length > 1"><a routerLink="/order-purchase/{{shipped.id}}"> <img src="../../assets/svg/plus.svg" alt="Open"></a></td> 

										<!-- <td *ngIf="shipped.items.length > 1"> <button (click)="generateCollapse(shipped.items, i, shipped.orderNumber, shipped.updatedAt,  shipped.buyer.dataExtra.Address)"><img src="../../assets/svg/plus.svg" alt="Open"></button> </td> -->
									
									</tr>
								
								</tbody>
							</table>
						
							<ng-template #noShipped>
									<div class="col"><h4 class="black-title">{{'Recent.no-shipped' | translate}}</h4></div>
						 </ng-template>							
				</div>

				<div class="tab-pane fade" id="delivered" role="tabpanel" aria-labelledby="delivered-tab">
						<div class="col"><h4 class="black-title">There are not products delivered</h4></div>
					</div>

					<div class="tab-pane fade" id="cancelled" role="tabpanel" aria-labelledby="cancelled-tab">
							<div class="col"><h4 class="black-title">There are not products cancelled</h4></div>
						</div>

			</div>
		</div>
	</div>
	</ng-template>

</div>

<div class="modal fade modal-confirm" id="confirm" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" style="text-align: center;">Are you sure you want to cancel this order?</h5>
				</div>
				<div class="modal-body">
					<div class="row">
						<div class="col-lg-2"></div>
						<div class="col-lg-8 text-center">
							<button (click)="confirm(false,action)" class="blue-btn-light">No</button>
							<button (click)="confirm(true,action)" class="blue-btn">Yes</button>

						</div>
						<div class="col-lg-2"></div>
					</div>
				</div>
			</div>
		</div>
	</div>


	<div class="modal fade" id="shippingDocs" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
				<div class="modal-content">
					<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
									<img src="../../assets/svg/close.svg" alt="">
								</button>
						<h5 class="modal-title">ATTACH SHIPPING DOCUMENTS</h5>
						<button type="button" class="close" (click)="saveTracking()">
								<img src="../../assets/svg/check.svg" alt="">
							</button>
					</div>
					<div class="modal-body">
						<div class="row">
							<div class="col-lg-12">
									<form [formGroup]="trackingForm"  class="form-design">
											<div class="row">
												<div class="col-lg-12">
													<div class="form-group"> 
															<div class="row">
																<div class="col">
																	<label>Invoice <span class="field-status red">*</span> <img tooltip="Lorem Ipsum" placement="right" show-delay="0" z-index="1000000000" src="../../assets/svg/information-outline.svg" alt="" width="20"></label>
																		<input type="file" class="form-control" id="1" accept="application/msword, .doc, .docx, .rtf, application/rtf, application/pdf, image/*"
																(change)="handleFileInput($event, 'invoice')"   
																[ngClass]="{'is-invalid':trackingForm.get('invoice').invalid && trackingForm.get('invoice').touched}">
																<div class="invalid-feedback" *ngIf="trackingForm.get('invoice').hasError('required')">Invoice {{'Register.required' | translate}}.</div>              
							
																		</div>
																
															</div>
													</div>
												</div>
												<div class="col-lg-12">
													<div class="form-group">
															<div class="row">
																<div class="col">
																	<label>Health Certificate <span class="field-status red">*</span> <img tooltip="Lorem Ipsum" placement="right" show-delay="0"  z-index="1000000000" src="../../assets/svg/information-outline.svg" alt="" width="20"></label>
																		<input type="file" class="form-control" id="2"  accept="pplication/msword, .doc, .docx, .rtf, application/rtf, application/pdf, image/*"
																(change)="handleFileInput($event, 'healthCert')" 
																[ngClass]="{'is-invalid':trackingForm.get('healthCert').invalid && trackingForm.get('healthCert').touched}">
																<div class="invalid-feedback" *ngIf="trackingForm.get('healthCert').hasError('required')">Healrh Certificate {{'Register.required' | translate}}.</div>              
							
																		</div>
															 
															</div>
													</div>
											</div>
											<div class="col-lg-12">
														<div class="form-group">
															<div class="row">
																<div class="col">
																	<label>Packing List <span class="field-status red">*</span> <img tooltip="Lorem Ipsum" placement="right" show-delay="0"  z-index="1000000000" src="../../assets/svg/information-outline.svg" alt="" width="20"></label>
																		<input type="file" class="form-control" id="3"  accept="pplication/msword, .doc, .docx, .rtf, application/rtf, application/pdf, image/*"
																(change)="handleFileInput($event, 'packingList')" 
																[ngClass]="{'is-invalid':trackingForm.get('packingList').invalid && trackingForm.get('packingList').touched}">
																<div class="invalid-feedback" *ngIf="trackingForm.get('packingList').hasError('required')">Packing List {{'Register.required' | translate}}.</div>              
							
																		</div>
															 
															</div>
													</div>
											</div>
											<div class="col-lg-12">
														<div class="form-group">
															<div class="row">
																<div class="col">
																	<label>AWB <span class="field-status red">*</span> <img tooltip="Lorem Ipsum" placement="right" show-delay="0"  z-index="1000000000" src="../../assets/svg/information-outline.svg" alt="" width="20"></label>
																		<input type="file" class="form-control" id="4" accept="pplication/msword, .doc, .docx, .rtf, application/rtf, application/pdf, image/*"
																(change)="handleFileInput($event, 'awb')" 
																[ngClass]="{'is-invalid':trackingForm.get('awb').invalid && trackingForm.get('awb').touched}">
																<div class="invalid-feedback" *ngIf="trackingForm.get('awb').hasError('required')">AWB {{'Register.required' | translate}}.</div>              
							
																		</div>
															 
															</div>
													</div>
											</div>
							
											<div class="col-lg-12">
														<div class="form-group">
															<div class="row">
																<div class="col">
																	<label>Certificate of Origin <small>(Optional)</small> <img tooltip="Lorem Ipsum" placement="right" show-delay="0"  z-index="1000000000" src="../../assets/svg/information-outline.svg" alt="" width="20"></label>
																		<input type="file" class="form-control" id="5"  accept="pplication/msword, .doc, .docx, .rtf, application/rtf, application/pdf, image/*"
																(change)="handleFileInput($event, 'certificateOrigin')" 
																[ngClass]="{'is-invalid':trackingForm.get('certificateOrigin').invalid && trackingForm.get('certificateOrigin').touched}">
																<div class="invalid-feedback" *ngIf="trackingForm.get('certificateOrigin').hasError('required')">Certificate of Origin {{'Register.required' | translate}}.</div>              
							
																		</div>
															 
															</div>
													</div>
											</div>
												<div class="col-lg-12">
														<div class="form-group">
															<div class="row">
																<div class="col">
																	<label>Credit Note <small>(Optional)</small> <img tooltip="Lorem Ipsum" placement="right" show-delay="0"  z-index="1000000000" src="../../assets/svg/information-outline.svg" alt="" width="20"></label>
																		<input type="file" class="form-control" id="6" accept="pplication/msword, .doc, .docx, .rtf, application/rtf, application/pdf, image/*"
																(change)="handleFileInput($event,'creditNote')" 
																[ngClass]="{'is-invalid':trackingForm.get('creditNote').invalid && trackingForm.get('creditNote').touched}">
																<div class="invalid-feedback" *ngIf="trackingForm.get('creditNote').hasError('required')">Credit Note {{'Register.required' | translate}}.</div>              
							
																		</div>
																
															</div>
														</div>
													 
												</div>
												
											</div>
										</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>